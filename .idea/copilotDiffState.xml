<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/ai_service/src/main/java/com/child1/ai_service/service/Recommendationservice.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/ai_service/src/main/java/com/child1/ai_service/service/Recommendationservice.java" />
              <option name="originalContent" value="package com.child1.ai_service.service;&#10;&#10;&#10;import com.child1.ai_service.model.Recommendation;&#10;import com.child1.ai_service.repo.RecommendationRepo;&#10;import lombok.RequiredArgsConstructor;&#10;import org.springframework.stereotype.Service;&#10;&#10;import java.util.List;&#10;&#10;@Service&#10;@RequiredArgsConstructor&#10;public class Recommendationservice {&#10;    private final RecommendationRepo recommendationRepo;&#10;&#10;    public List&lt;Recommendation&gt; getAllRecommendations() {&#10;        return recommendationRepo.findAll();&#10;    }&#10;&#10;    public Recommendation saveRecommendation(Recommendation recommendation) {&#10;&#10;        return recommendationRepo.save(recommendation);&#10;    }&#10;&#10;    public void deleteRecommendation(String id) {&#10;        if (recommendationRepo.existsById(id)) {&#10;            recommendationRepo.deleteById(id);&#10;        } else {&#10;            throw new IllegalArgumentException(&quot;Recommendation with id &quot; + id + &quot; does not exist.&quot;);&#10;        }&#10;    }&#10;&#10;    public Recommendation getActivityRecommendationById(String id) {&#10;        return recommendationRepo.findById(id)&#10;                .orElseThrow(() -&gt; new IllegalArgumentException(&quot;Recommendation with id &quot; + id + &quot; does not exist.&quot;));&#10;        &#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.child1.ai_service.service;&#10;&#10;&#10;import com.child1.ai_service.model.Recommendation;&#10;import com.child1.ai_service.repo.RecommendationRepo;&#10;import lombok.RequiredArgsConstructor;&#10;import org.springframework.stereotype.Service;&#10;import org.springframework.validation.annotation.Validated;&#10;&#10;import javax.validation.Valid;&#10;import java.util.List;&#10;&#10;@Service&#10;@Validated&#10;@RequiredArgsConstructor&#10;public class Recommendationservice {&#10;    private final RecommendationRepo recommendationRepo;&#10;&#10;    public List&lt;Recommendation&gt; getAllRecommendations() {&#10;        return recommendationRepo.findAll();&#10;    }&#10;&#10;    public Recommendation saveRecommendation(@Valid Recommendation recommendation) {&#10;        // Additional null check (optional, as @Valid should handle most cases)&#10;        if (recommendation == null) {&#10;            throw new IllegalArgumentException(&quot;Recommendation cannot be null&quot;);&#10;        }&#10;        return recommendationRepo.save(recommendation);&#10;    }&#10;&#10;    public void deleteRecommendation(String id) {&#10;        if (recommendationRepo.existsById(id)) {&#10;            recommendationRepo.deleteById(id);&#10;        } else {&#10;            throw new IllegalArgumentException(&quot;Recommendation with id &quot; + id + &quot; does not exist.&quot;);&#10;        }&#10;    }&#10;&#10;    public Recommendation getActivityRecommendationById(String id) {&#10;        return recommendationRepo.findById(id)&#10;                .orElseThrow(() -&gt; new IllegalArgumentException(&quot;Recommendation with id &quot; + id + &quot; does not exist.&quot;));&#10;        &#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/config_server/.gitignore">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/config_server/.gitignore" />
              <option name="originalContent" value="HELP.md&#10;target/&#10;.mvn/wrapper/maven-wrapper.jar&#10;!**/src/main/**/target/&#10;!**/src/test/**/target/&#10;&#10;### STS ###&#10;.apt_generated&#10;.classpath&#10;.factorypath&#10;.project&#10;.settings&#10;.springBeans&#10;.sts4-cache&#10;&#10;### IntelliJ IDEA ###&#10;.idea&#10;*.iws&#10;*.iml&#10;*.ipr&#10;&#10;### NetBeans ###&#10;/nbproject/private/&#10;/nbbuild/&#10;/dist/&#10;/nbdist/&#10;/.nb-gradle/&#10;build/&#10;!**/src/main/**/build/&#10;!**/src/test/**/build/&#10;&#10;### VS Code ###&#10;.vscode/&#10;resources/&#10;" />
              <option name="updatedContent" value="HELP.md&#10;target/&#10;.mvn/wrapper/maven-wrapper.jar&#10;!**/src/main/**/target/&#10;!**/src/test/**/target/&#10;&#10;### STS ###&#10;.apt_generated&#10;.classpath&#10;.factorypath&#10;.project&#10;.settings&#10;.springBeans&#10;.sts4-cache&#10;&#10;### IntelliJ IDEA ###&#10;.idea&#10;*.iws&#10;*.iml&#10;*.ipr&#10;&#10;### NetBeans ###&#10;/nbproject/private/&#10;/nbbuild/&#10;/dist/&#10;/nbdist/&#10;/.nb-gradle/&#10;build/&#10;!**/src/main/**/build/&#10;!**/src/test/**/build/&#10;&#10;### VS Code ###&#10;.vscode/&#10;resources/&#10;resources/config/" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/config_server/src/main/resources/config/api-gateway.yml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/config_server/src/main/resources/config/api-gateway.yml" />
              <option name="originalContent" value="spring:&#10;  application:&#10;    name: api-gateway&#10;&#10;  cloud:&#10;    gateway:&#10;      routes:&#10;        - id: activity-service&#10;          uri: lb://activity-service&#10;          predicates:&#10;            - Path=/api/v1/activities/**&#10;&#10;        - id: ai-service&#10;          uri: lb://ai-service&#10;          predicates:&#10;            - Path=/api/v1/recommendations/**&#10;&#10;        - id: user-service&#10;          uri: lb://user-service&#10;          predicates:&#10;            - Path=/api/v1/users/**&#10;&#10;        - id: auth-service&#10;          uri: lb://auth-service&#10;&#10;server:&#10;  port: 8080&#10;&#10;eureka:&#10;  client:&#10;    register-with-eureka: true&#10;    fetch-registry: true&#10;    service-url:&#10;      defaultZone: http://localhost:8761/eureka/&#10;" />
              <option name="updatedContent" value="spring:&#10;  application:&#10;    name: api-gateway&#10;&#10;  cloud:&#10;    gateway:&#10;      routes:&#10;        - id: activity-service&#10;          uri: lb://activity-service&#10;          predicates:&#10;            - Path=/api/v1/activities/**&#10;&#10;        - id: ai-service&#10;          uri: lb://ai-service&#10;          predicates:&#10;            - Path=/api/v1/recommendations/**&#10;&#10;        - id: user-service&#10;          uri: lb://user-service&#10;          predicates:&#10;            - Path=/api/v1/users/**&#10;&#10;        - id: auth-service&#10;          uri: lb://auth-service&#10;          predicates:&#10;            - Path=/api/v1/auth/**&#10;&#10;server:&#10;  port: 8080&#10;&#10;eureka:&#10;  client:&#10;    register-with-eureka: true&#10;    fetch-registry: true&#10;    service-url:&#10;      defaultZone: http://localhost:8761/eureka/" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/gateway/pom.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/gateway/pom.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#10;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&#10;&#9;xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;&#10;&#9;&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&#10;&#9;&lt;parent&gt;&#10;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;&#10;&#9;&#9;&lt;version&gt;3.5.4&lt;/version&gt;&#10;&#9;&#9;&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;&#10;&#9;&lt;/parent&gt;&#10;&#9;&lt;groupId&gt;com.child1&lt;/groupId&gt;&#10;&#9;&lt;artifactId&gt;gateway&lt;/artifactId&gt;&#10;&#9;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&#10;&#9;&lt;name&gt;gateway&lt;/name&gt;&#10;&#9;&lt;description&gt;gateway&lt;/description&gt;&#10;&#9;&lt;url/&gt;&#10;&#9;&lt;licenses&gt;&#10;&#9;&#9;&lt;license/&gt;&#10;&#9;&lt;/licenses&gt;&#10;&#9;&lt;developers&gt;&#10;&#9;&#9;&lt;developer/&gt;&#10;&#9;&lt;/developers&gt;&#10;&#9;&lt;scm&gt;&#10;&#9;&#9;&lt;connection/&gt;&#10;&#9;&#9;&lt;developerConnection/&gt;&#10;&#9;&#9;&lt;tag/&gt;&#10;&#9;&#9;&lt;url/&gt;&#10;&#9;&lt;/scm&gt;&#10;&#9;&lt;properties&gt;&#10;&#9;&#9;&lt;java.version&gt;17&lt;/java.version&gt;&#10;&#9;&#9;&lt;spring-cloud.version&gt;2025.0.0&lt;/spring-cloud.version&gt;&#10;&#9;&lt;/properties&gt;&#10;&#9;&lt;dependencies&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;&#10;            &lt;artifactId&gt;spring-cloud-starter-gateway-server-webflux&lt;/artifactId&gt;&#10;        &lt;/dependency&gt;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;io.projectreactor&lt;/groupId&gt;&#10;            &lt;artifactId&gt;reactor-test&lt;/artifactId&gt;&#10;            &lt;scope&gt;test&lt;/scope&gt;&#10;        &lt;/dependency&gt;&#10;    &lt;/dependencies&gt;&#10;&#9;&lt;dependencyManagement&gt;&#10;&#9;&#9;&lt;dependencies&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;version&gt;${spring-cloud.version}&lt;/version&gt;&#10;&#9;&#9;&#9;&#9;&lt;type&gt;pom&lt;/type&gt;&#10;&#9;&#9;&#9;&#9;&lt;scope&gt;import&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;/dependencies&gt;&#10;&#9;&lt;/dependencyManagement&gt;&#10;&#10;&#9;&lt;build&gt;&#10;&#9;&#9;&lt;plugins&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&lt;/plugins&gt;&#10;&#9;&lt;/build&gt;&#10;&#10;&lt;/project&gt;&#10;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#13;&#10;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&#13;&#10;&#9;xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;&#13;&#10;&#9;&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&#13;&#10;&#9;&lt;parent&gt;&#13;&#10;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#13;&#10;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&lt;version&gt;3.5.4&lt;/version&gt;&#13;&#10;&#9;&#9;&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;&#13;&#10;&#9;&lt;/parent&gt;&#13;&#10;&#9;&lt;groupId&gt;com.child1&lt;/groupId&gt;&#13;&#10;&#9;&lt;artifactId&gt;gateway&lt;/artifactId&gt;&#13;&#10;&#9;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&#13;&#10;&#9;&lt;name&gt;gateway&lt;/name&gt;&#13;&#10;&#9;&lt;description&gt;gateway&lt;/description&gt;&#13;&#10;&#9;&lt;url/&gt;&#13;&#10;&#9;&lt;licenses&gt;&#13;&#10;&#9;&#9;&lt;license/&gt;&#13;&#10;&#9;&lt;/licenses&gt;&#13;&#10;&#9;&lt;developers&gt;&#13;&#10;&#9;&#9;&lt;developer/&gt;&#13;&#10;&#9;&lt;/developers&gt;&#13;&#10;&#9;&lt;scm&gt;&#13;&#10;&#9;&#9;&lt;connection/&gt;&#13;&#10;&#9;&#9;&lt;developerConnection/&gt;&#13;&#10;&#9;&#9;&lt;tag/&gt;&#13;&#10;&#9;&#9;&lt;url/&gt;&#13;&#10;&#9;&lt;/scm&gt;&#13;&#10;&#9;&lt;properties&gt;&#13;&#10;&#9;&#9;&lt;java.version&gt;17&lt;/java.version&gt;&#13;&#10;&#9;&#9;&lt;spring-cloud.version&gt;2025.0.0&lt;/spring-cloud.version&gt;&#13;&#10;&#9;&lt;/properties&gt;&#13;&#10;&#9;&lt;dependencies&gt;&#13;&#10;&#9;&#9;&lt;dependency&gt;&#13;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&lt;/dependency&gt;&#13;&#10;&#13;&#10;&#9;&#9;&lt;dependency&gt;&#13;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#13;&#10;&#9;&#9;&lt;/dependency&gt;&#13;&#10;        &lt;dependency&gt;&#13;&#10;            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;&#13;&#10;            &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;&#13;&#10;        &lt;/dependency&gt;&#13;&#10;        &lt;dependency&gt;&#13;&#10;            &lt;groupId&gt;io.projectreactor&lt;/groupId&gt;&#13;&#10;            &lt;artifactId&gt;reactor-test&lt;/artifactId&gt;&#13;&#10;            &lt;scope&gt;test&lt;/scope&gt;&#13;&#10;        &lt;/dependency&gt;&#13;&#10;    &lt;/dependencies&gt;&#13;&#10;&#9;&lt;dependencyManagement&gt;&#13;&#10;&#9;&#9;&lt;dependencies&gt;&#13;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#13;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&#9;&#9;&lt;version&gt;${spring-cloud.version}&lt;/version&gt;&#13;&#10;&#9;&#9;&#9;&#9;&lt;type&gt;pom&lt;/type&gt;&#13;&#10;&#9;&#9;&#9;&#9;&lt;scope&gt;import&lt;/scope&gt;&#13;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#13;&#10;&#9;&#9;&lt;/dependencies&gt;&#13;&#10;&#9;&lt;/dependencyManagement&gt;&#13;&#10;&#13;&#10;&#9;&lt;build&gt;&#13;&#10;&#9;&#9;&lt;plugins&gt;&#13;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#13;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#13;&#10;&#9;&#9;&lt;/plugins&gt;&#13;&#10;&#9;&lt;/build&gt;&#13;&#10;&#13;&#10;&lt;/project&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/gateway/src/main/java/com/child1/gateway/AuthFilter.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/gateway/src/main/java/com/child1/gateway/AuthFilter.java" />
              <option name="originalContent" value="package com.child1.gateway;&#10;&#10;@Component&#10;public class AuthFilter implements GlobalFilter, Ordered {&#10;&#10;    private final WebClient.Builder webClientBuilder;&#10;&#10;    public AuthFilter(WebClient.Builder webClientBuilder) {&#10;        this.webClientBuilder = webClientBuilder;&#10;    }&#10;&#10;    @Override&#10;    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) {&#10;        String authHeader = exchange.getRequest().getHeaders().getFirst(HttpHeaders.AUTHORIZATION);&#10;&#10;        if (authHeader == null || !authHeader.startsWith(&quot;Bearer &quot;)) {&#10;            exchange.getResponse().setStatusCode(HttpStatus.UNAUTHORIZED);&#10;            return exchange.getResponse().setComplete();&#10;        }&#10;&#10;        String token = authHeader.substring(7);&#10;&#10;        return webClientBuilder.build()&#10;                .get()&#10;                .uri(&quot;http://AUTH-SERVICE/auth/validate?token=&quot; + token)&#10;                .retrieve()&#10;                .bodyToMono(Map.class)&#10;                .flatMap(response -&gt; {&#10;                    Boolean isValid = (Boolean) response.get(&quot;valid&quot;);&#10;                    if (Boolean.TRUE.equals(isValid)) {&#10;                        return chain.filter(exchange);&#10;                    }&#10;                    exchange.getResponse().setStatusCode(HttpStatus.UNAUTHORIZED);&#10;                    return exchange.getResponse().setComplete();&#10;                });&#10;    }&#10;&#10;    @Override&#10;    public int getOrder() {&#10;        return -1;&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.child1.gateway;&#10;&#10;import org.springframework.cloud.gateway.filter.GlobalFilter;&#10;import org.springframework.core.Ordered;&#10;import org.springframework.http.HttpHeaders;&#10;import org.springframework.http.HttpStatus;&#10;import org.springframework.stereotype.Component;&#10;import org.springframework.web.reactive.function.client.WebClient;&#10;import org.springframework.web.server.ServerWebExchange;&#10;import reactor.core.publisher.Mono;&#10;import org.springframework.cloud.gateway.filter.GatewayFilterChain;&#10;&#10;import java.util.Map;&#10;&#10;@Component&#10;public class AuthFilter implements GlobalFilter, Ordered {&#10;&#10;    private final WebClient.Builder webClientBuilder;&#10;&#10;    public AuthFilter(WebClient.Builder webClientBuilder) {&#10;        this.webClientBuilder = webClientBuilder;&#10;    }&#10;&#10;    @Override&#10;    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) {&#10;        String authHeader = exchange.getRequest().getHeaders().getFirst(HttpHeaders.AUTHORIZATION);&#10;&#10;        if (authHeader == null || !authHeader.startsWith(&quot;Bearer &quot;)) {&#10;            exchange.getResponse().setStatusCode(HttpStatus.UNAUTHORIZED);&#10;            return exchange.getResponse().setComplete();&#10;        }&#10;&#10;        String token = authHeader.substring(7);&#10;&#10;        return webClientBuilder.build()&#10;                .get()&#10;                .uri(&quot;http://AUTH-SERVICE/auth/validate?token=&quot; + token)&#10;                .retrieve()&#10;                .bodyToMono(Map.class)&#10;                .flatMap(response -&gt; {&#10;                    Boolean isValid = (Boolean) response.get(&quot;valid&quot;);&#10;                    if (Boolean.TRUE.equals(isValid)) {&#10;                        return chain.filter(exchange);&#10;                    }&#10;                    exchange.getResponse().setStatusCode(HttpStatus.UNAUTHORIZED);&#10;                    return exchange.getResponse().setComplete();&#10;                });&#10;    }&#10;&#10;    @Override&#10;    public int getOrder() {&#10;        return -1;&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>